"use strict";angular.module("eplGlanceApp",["ngAnimate","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/schedule",{templateUrl:"views/sched.html",controller:"SchedCtrl"}).when("/team/:id",{templateUrl:"views/team.html",controller:"TeamCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("eplGlanceApp").controller("MainCtrl",["$scope","footballData","season",function(a,b,c){a.leagueSeason=c,b.season("leagueTable").get().$promise.then(function(b){a.fbData=b;for(var c=0;c<a.fbData.standing.length;c++){var d=a.fbData.standing[c]._links.team.href;a.fbData.standing[c].teamId=d.split("/").pop()}})}]),angular.module("eplGlanceApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("eplGlanceApp").factory("footballData",["$resource","$http","league",function(a,b,c){return b.defaults.headers.common["X-Auth-Token"]="7bf4013f2dd948d28ba799cacf72ec50",{season:function(b){return a("http://api.football-data.org/alpha/soccerseasons/:league/:seasonCall",{league:c,seasonCall:b})},team:function(b){return a("http://api.football-data.org/alpha/teams/:teamId",{teamId:b})}}}]),angular.module("eplGlanceApp").constant("league",354).constant("season","2014 / 2015"),angular.module("eplGlanceApp").controller("TeamCtrl",["$scope","$routeParams","footballData",function(a,b,c){a.fbData=c.team(b.id).get(),console.log(a)}]),angular.module("eplGlanceApp").controller("SchedCtrl",["$scope","footballData","season",function(a,b,c){a.leagueSeason=c,b.season("fixtures").get({timeFrame:"n14"}).$promise.then(function(b){for(var c,d,e,f=[],g=-1,h=-1,i=-1,j=0;j<b.fixtures.length;j++){var k=new Date(b.fixtures[j].date);c!==b.fixtures[j].matchday&&(c=b.fixtures[j].matchday,f.push({matchDay:c,dates:[]}),g++,h=-1,i=-1),d!==k.toLocaleDateString()&&(d=k.toLocaleDateString(),f[g].dates.push({date:k.toISOString(),timezone:k.getTimezoneOffset(),times:[]}),h++,i=-1),e!==k.toLocaleTimeString()&&(e=k.toLocaleTimeString(),f[g].dates[h].times.push({date:k.toISOString(),timezone:k.getTimezoneOffset(),games:[]}),i++),f[g].dates[h].times[i].games.push({date:b.fixtures[j].date,homeName:b.fixtures[j].homeTeamName,homeId:b.fixtures[j]._links.homeTeam.href.split("/").pop(),homeGoals:b.fixtures[j].result.goalsHomeTeam,awayName:b.fixtures[j].awayTeamName,awayId:b.fixtures[j]._links.awayTeam.href.split("/").pop(),awayGoals:b.fixtures[j].result.goalsAwayTeam})}a.fixtures=f})}]);