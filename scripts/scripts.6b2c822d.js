"use strict";angular.module("eplGlanceApp",["ngAnimate","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/schedule",{templateUrl:"views/sched.html",controller:"SchedCtrl"}).when("/team/:id",{templateUrl:"views/team.html",controller:"TeamCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("eplGlanceApp").controller("MainCtrl",["$scope","footballData","season",function(a,b,c){a.leagueSeason=c,b.season("leagueTable").get().$promise.then(function(b){a.fbData=b;for(var c=0;c<a.fbData.standing.length;c++){var d=a.fbData.standing[c]._links.team.href;a.fbData.standing[c].teamId=d.split("/").pop()}})}]),angular.module("eplGlanceApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("eplGlanceApp").factory("footballData",["$resource","$http","league",function(a,b,c){return b.defaults.headers.common["X-Auth-Token"]="7bf4013f2dd948d28ba799cacf72ec50",{season:function(b){return a("http://api.football-data.org/alpha/soccerseasons/:league/:seasonCall",{league:c,seasonCall:b})},team:function(b){return a("http://api.football-data.org/alpha/teams/:teamId",{teamId:b})}}}]),angular.module("eplGlanceApp").constant("league",354).constant("season","2014 / 2015"),angular.module("eplGlanceApp").controller("TeamCtrl",["$scope","$routeParams","footballData",function(a,b,c){a.fbData=c.team(b.id).get(),console.log(a)}]),angular.module("eplGlanceApp").controller("SchedCtrl",["$scope","footballData","season",function(a,b,c){a.leagueSeason=c,b.season("fixtures").get({timeFrame:"n14"}).$promise.then(function(b){for(var c,d,e=[],f=-1,g=-1,h=0;h<b.fixtures.length;h++){if(c!==b.fixtures[h].matchday&&(c=b.fixtures[h].matchday,e.push({matchDay:c,dates:[]}),f++,g=-1),d!==b.fixtures[h].date){d=b.fixtures[h].date;var i=new Date(d);e[f].dates.push({date:i.toLocaleString(),games:[]}),g++}e[f].dates[g].games.push({date:b.fixtures[h].date,homeName:b.fixtures[h].homeTeamName,homeId:b.fixtures[h]._links.homeTeam.href.split("/").pop(),homeGoals:b.fixtures[h].result.goalsHomeTeam,awayName:b.fixtures[h].awayTeamName,awayId:b.fixtures[h]._links.awayTeam.href.split("/").pop(),awayGoals:b.fixtures[h].result.goalsAwayTeam})}a.fixtures=e})}]);